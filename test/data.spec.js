require('../src/data.js');
require('../src/data/worldbank/worldbank.js');

const tryData = {
  "PER": {
    "indicators": [{
        "data": {
          "1960": "",
          "1961": "",
          "1962": "",
          "1963": "",
          "1964": "",
          "1965": "",
          "1966": "",
          "1967": "",
          "1968": "",
          "1969": "",
          "1970": "",
          "1971": "",
          "1972": "",
          "1973": "",
          "1974": "",
          "1975": "",
          "1976": "",
          "1977": "",
          "1978": "",
          "1979": "",
          "1980": "",
          "1981": "",
          "1982": "",
          "1983": "",
          "1984": "",
          "1985": "",
          "1986": "",
          "1987": "",
          "1988": "",
          "1989": "",
          "1990": "",
          "1991": "",
          "1992": "",
          "1993": "",
          "1994": "",
          "1995": "",
          "1996": "",
          "1997": "",
          "1998": "",
          "1999": "",
          "2000": "",
          "2001": "",
          "2002": 31.4799995422363,
          "2003": 29.6299991607666,
          "2004": 27.6299991607666,
          "2005": 27.2099990844727,
          "2006": 26.9699993133545,
          "2007": 27.6700000762939,
          "2008": 26.9599990844727,
          "2009": 27.3600006103516,
          "2010": 25.3400001525879,
          "2011": 24.7999992370605,
          "2012": 25.0400009155273,
          "2013": 24.0900001525879,
          "2014": 24.2099990844727,
          "2015": 21.6800003051758,
          "2016": 23.7399997711182,
          "2017": 23.7600002288818
        },
        "countryName": "Perú",
        "countryCode": "PER",
        "indicatorName": "Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)",
        "indicatorCode": "SL.TLF.PART.FE.ZS"
      },
      {
        "data": {
          "1960": "",
          "1961": "",
          "1962": "",
          "1963": "",
          "1964": "",
          "1965": "",
          "1966": "",
          "1967": "",
          "1968": "",
          "1969": "",
          "1970": "",
          "1971": "",
          "1972": "",
          "1973": "",
          "1974": "",
          "1975": "",
          "1976": "",
          "1977": "",
          "1978": "",
          "1979": "",
          "1980": "",
          "1981": "",
          "1982": "",
          "1983": "",
          "1984": "",
          "1985": "",
          "1986": "",
          "1987": "",
          "1988": "",
          "1989": "",
          "1990": "",
          "1991": "",
          "1992": "",
          "1993": "",
          "1994": "",
          "1995": "",
          "1996": "",
          "1997": "",
          "1998": "",
          "1999": "",
          "2000": "",
          "2001": "",
          "2002": 57.3788986206055,
          "2003": 59.2597007751465,
          "2004": 60.5155982971191,
          "2005": 58.567699432373,
          "2006": 59.5596008300781,
          "2007": 62.5275993347168,
          "2008": 61.5718002319336,
          "2009": 63.0060997009277,
          "2010": 64.4614028930664,
          "2011": 64.3878021240234,
          "2012": 63.0351982116699,
          "2013": 62.2015991210938,
          "2014": 61.209400177002,
          "2015": 62.2141990661621,
          "2016": 61.5542984008789,
          "2017": 61.4822998046875
        },
        "countryName": "Perú",
        "countryCode": "PER",
        "indicatorName": "Fuerza laboral con educación intermedia (% del total)",
        "indicatorCode": "SL.TLF.INTM.ZS"
      }
    ]
  },
  "MEX": {
    "indicators": [{
        "data": {
          "1960": "",
          "1961": "",
          "1962": "",
          "1963": "",
          "1964": "",
          "1965": "",
          "1966": "",
          "1967": "",
          "1968": "",
          "1969": "",
          "1970": "",
          "1971": "",
          "1972": "",
          "1973": "",
          "1974": "",
          "1975": "",
          "1976": "",
          "1977": "",
          "1978": "",
          "1979": "",
          "1980": "",
          "1981": "",
          "1982": "",
          "1983": "",
          "1984": "",
          "1985": "",
          "1986": "",
          "1987": "",
          "1988": "",
          "1989": "",
          "1990": 33.1,
          "1991": 31.8,
          "1992": 30.6,
          "1993": 29.4,
          "1994": 28.4,
          "1995": 27.5,
          "1996": 26.7,
          "1997": 25.9,
          "1998": 25.1,
          "1999": 24.3,
          "2000": 23.6,
          "2001": 22.9,
          "2002": 22.2,
          "2003": 21.5,
          "2004": 20.8,
          "2005": 20,
          "2006": 19.2,
          "2007": 18.2,
          "2008": 17.3,
          "2009": 16.4,
          "2010": 15.6,
          "2011": 14.9,
          "2012": 14.5,
          "2013": 14.2,
          "2014": 14,
          "2015": 14.1,
          "2016": 14.4,
          "2017": ""
        },
        "countryName": "México",
        "countryCode": "MEX",
        "indicatorName": "Prevalencia de anemia entre mujeres no embarazadas (% de mujeres entre 15-49 años)",
        "indicatorCode": "SH.ANM.NPRG.ZS"
      },
      {
        "data": {
          "1960": "",
          "1961": "",
          "1962": "",
          "1963": "",
          "1964": "",
          "1965": "",
          "1966": "",
          "1967": "",
          "1968": "",
          "1969": "",
          "1970": "",
          "1971": "",
          "1972": "",
          "1973": "",
          "1974": "",
          "1975": "",
          "1976": "",
          "1977": "",
          "1978": "",
          "1979": "",
          "1980": "",
          "1981": "",
          "1982": "",
          "1983": "",
          "1984": "",
          "1985": "",
          "1986": "",
          "1987": "",
          "1988": "",
          "1989": "",
          "1990": 33.3,
          "1991": 32,
          "1992": 30.8,
          "1993": 29.7,
          "1994": 28.7,
          "1995": 27.8,
          "1996": 27,
          "1997": 26.2,
          "1998": 25.4,
          "1999": 24.6,
          "2000": 23.9,
          "2001": 23.2,
          "2002": 22.5,
          "2003": 21.8,
          "2004": 21.1,
          "2005": 20.3,
          "2006": 19.4,
          "2007": 18.5,
          "2008": 17.6,
          "2009": 16.6,
          "2010": 15.8,
          "2011": 15.2,
          "2012": 14.7,
          "2013": 14.4,
          "2014": 14.3,
          "2015": 14.4,
          "2016": 14.6,
          "2017": ""
        },
        "countryName": "México",
        "countryCode": "MEX",
        "indicatorName": "Prevalencia de anemia entre mujeres en edad fértil (% de mujeres de entre 15 y 49 años)",
        "indicatorCode": "SH.ANM.ALLW.ZS"
      },
      {
        "data": {
          "1960": "",
          "1961": "",
          "1962": "",
          "1963": "",
          "1964": "",
          "1965": "",
          "1966": "",
          "1967": "",
          "1968": "",
          "1969": "",
          "1970": "",
          "1971": "",
          "1972": "",
          "1973": "",
          "1974": "",
          "1975": "",
          "1976": "",
          "1977": "",
          "1978": "",
          "1979": "",
          "1980": "",
          "1981": "",
          "1982": "",
          "1983": "",
          "1984": "",
          "1985": "",
          "1986": "",
          "1987": "",
          "1988": "",
          "1989": "",
          "1990": "",
          "1991": "",
          "1992": "",
          "1993": "",
          "1994": "",
          "1995": "",
          "1996": "",
          "1997": "",
          "1998": "",
          "1999": "",
          "2000": "",
          "2001": "",
          "2002": "",
          "2003": "",
          "2004": "",
          "2005": 26.9599990844727,
          "2006": 27.9799995422363,
          "2007": 28.6299991607666,
          "2008": 27.9099998474121,
          "2009": 28.3999996185303,
          "2010": 28.5300006866455,
          "2011": 28.0499992370605,
          "2012": 28.5,
          "2013": 27.5799999237061,
          "2014": 27.6700000762939,
          "2015": 27.8999996185303,
          "2016": 27.1700000762939,
          "2017": 26.6299991607666
        },
        "countryName": "México",
        "countryCode": "MEX",
        "indicatorName": "Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)",
        "indicatorCode": "SL.TLF.PART.FE.ZS"
      },
    ]
  }
}

const peruvianData = [{
    "data": {
      "1960": "",
      "1961": "",
      "1962": "",
      "1963": "",
      "1964": "",
      "1965": "",
      "1966": "",
      "1967": "",
      "1968": "",
      "1969": "",
      "1970": "",
      "1971": "",
      "1972": "",
      "1973": "",
      "1974": "",
      "1975": "",
      "1976": "",
      "1977": "",
      "1978": "",
      "1979": "",
      "1980": "",
      "1981": "",
      "1982": "",
      "1983": "",
      "1984": "",
      "1985": "",
      "1986": "",
      "1987": "",
      "1988": "",
      "1989": "",
      "1990": "",
      "1991": "",
      "1992": "",
      "1993": "",
      "1994": "",
      "1995": "",
      "1996": "",
      "1997": "",
      "1998": "",
      "1999": "",
      "2000": "",
      "2001": "",
      "2002": 31.4799995422363,
      "2003": 29.6299991607666,
      "2004": 27.6299991607666,
      "2005": 27.2099990844727,
      "2006": 26.9699993133545,
      "2007": 27.6700000762939,
      "2008": 26.9599990844727,
      "2009": 27.3600006103516,
      "2010": 25.3400001525879,
      "2011": 24.7999992370605,
      "2012": 25.0400009155273,
      "2013": 24.0900001525879,
      "2014": 24.2099990844727,
      "2015": 21.6800003051758,
      "2016": 23.7399997711182,
      "2017": 23.7600002288818
    },
    "countryName": "Perú",
    "countryCode": "PER",
    "indicatorName": "Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)",
    "indicatorCode": "SL.TLF.PART.FE.ZS"
  },
  {
    "data": {
      "1960": "",
      "1961": "",
      "1962": "",
      "1963": "",
      "1964": "",
      "1965": "",
      "1966": "",
      "1967": "",
      "1968": "",
      "1969": "",
      "1970": "",
      "1971": "",
      "1972": "",
      "1973": "",
      "1974": "",
      "1975": "",
      "1976": "",
      "1977": "",
      "1978": "",
      "1979": "",
      "1980": "",
      "1981": "",
      "1982": "",
      "1983": "",
      "1984": "",
      "1985": "",
      "1986": "",
      "1987": "",
      "1988": "",
      "1989": "",
      "1990": "",
      "1991": "",
      "1992": "",
      "1993": "",
      "1994": "",
      "1995": "",
      "1996": "",
      "1997": "",
      "1998": "",
      "1999": "",
      "2000": "",
      "2001": "",
      "2002": 57.3788986206055,
      "2003": 59.2597007751465,
      "2004": 60.5155982971191,
      "2005": 58.567699432373,
      "2006": 59.5596008300781,
      "2007": 62.5275993347168,
      "2008": 61.5718002319336,
      "2009": 63.0060997009277,
      "2010": 64.4614028930664,
      "2011": 64.3878021240234,
      "2012": 63.0351982116699,
      "2013": 62.2015991210938,
      "2014": 61.209400177002,
      "2015": 62.2141990661621,
      "2016": 61.5542984008789,
      "2017": 61.4822998046875
    },
    "countryName": "Perú",
    "countryCode": "PER",
    "indicatorName": "Fuerza laboral con educación intermedia (% del total)",
    "indicatorCode": "SL.TLF.INTM.ZS"
  }
]

const miniData = [{
    "data": {
      "1960": "",
      "1961": "",
      "1962": "",
      "1963": "",
      "1964": "",
      "1965": "",
      "1966": "",
      "1967": "",
      "1968": "",
      "1969": "",
      "1970": "",
      "1971": "",
      "1972": "",
      "1973": "",
      "1974": "",
      "1975": "",
      "1976": "",
      "1977": "",
      "1978": "",
      "1979": "",
      "1980": "",
      "1981": "",
      "1982": "",
      "1983": "",
      "1984": "",
      "1985": "",
      "1986": "",
      "1987": "",
      "1988": "",
      "1989": "",
      "1990": 33.1,
      "1991": 31.8,
      "1992": 30.6,
      "1993": 29.4,
      "1994": 28.4,
      "1995": 27.5,
      "1996": 26.7,
      "1997": 25.9,
      "1998": 25.1,
      "1999": 24.3,
      "2000": 23.6,
      "2001": 22.9,
      "2002": 22.2,
      "2003": 21.5,
      "2004": 20.8,
      "2005": 20,
      "2006": 19.2,
      "2007": 18.2,
      "2008": 17.3,
      "2009": 16.4,
      "2010": 15.6,
      "2011": 14.9,
      "2012": 14.5,
      "2013": 14.2,
      "2014": 14,
      "2015": 14.1,
      "2016": 14.4,
      "2017": ""
    },
    "countryName": "México",
    "countryCode": "MEX",
    "indicatorName": "Prevalencia de anemia entre mujeres no embarazadas (% de mujeres entre 15-49 años)",
    "indicatorCode": "SH.ANM.NPRG.ZS"
  },
  {
    "data": {
      "1960": "",
      "1961": "",
      "1962": "",
      "1963": "",
      "1964": "",
      "1965": "",
      "1966": "",
      "1967": "",
      "1968": "",
      "1969": "",
      "1970": "",
      "1971": "",
      "1972": "",
      "1973": "",
      "1974": "",
      "1975": "",
      "1976": "",
      "1977": "",
      "1978": "",
      "1979": "",
      "1980": "",
      "1981": "",
      "1982": "",
      "1983": "",
      "1984": "",
      "1985": "",
      "1986": "",
      "1987": "",
      "1988": "",
      "1989": "",
      "1990": 33.3,
      "1991": 32,
      "1992": 30.8,
      "1993": 29.7,
      "1994": 28.7,
      "1995": 27.8,
      "1996": 27,
      "1997": 26.2,
      "1998": 25.4,
      "1999": 24.6,
      "2000": 23.9,
      "2001": 23.2,
      "2002": 22.5,
      "2003": 21.8,
      "2004": 21.1,
      "2005": 20.3,
      "2006": 19.4,
      "2007": 18.5,
      "2008": 17.6,
      "2009": 16.6,
      "2010": 15.8,
      "2011": 15.2,
      "2012": 14.7,
      "2013": 14.4,
      "2014": 14.3,
      "2015": 14.4,
      "2016": 14.6,
      "2017": ""
    },
    "countryName": "México",
    "countryCode": "MEX",
    "indicatorName": "Prevalencia de anemia entre mujeres en edad fértil (% de mujeres de entre 15 y 49 años)",
    "indicatorCode": "SH.ANM.ALLW.ZS"
  },
  {
    "data": {
      "1960": "",
      "1961": "",
      "1962": "",
      "1963": "",
      "1964": "",
      "1965": "",
      "1966": "",
      "1967": "",
      "1968": "",
      "1969": "",
      "1970": "",
      "1971": "",
      "1972": "",
      "1973": "",
      "1974": "",
      "1975": "",
      "1976": "",
      "1977": "",
      "1978": "",
      "1979": "",
      "1980": "",
      "1981": "",
      "1982": "",
      "1983": "",
      "1984": "",
      "1985": "",
      "1986": "",
      "1987": "",
      "1988": "",
      "1989": "",
      "1990": "",
      "1991": "",
      "1992": "",
      "1993": "",
      "1994": "",
      "1995": "",
      "1996": "",
      "1997": "",
      "1998": "",
      "1999": "",
      "2000": "",
      "2001": "",
      "2002": "",
      "2003": "",
      "2004": "",
      "2005": "",
      "2006": "",
      "2007": "",
      "2008": "",
      "2009": "",
      "2010": "",
      "2011": "",
      "2012": "",
      "2013": "",
      "2014": "",
      "2015": "",
      "2016": "",
      "2017": ""
    },
    "countryName": "México",
    "countryCode": "MEX",
    "indicatorName": "Mujeres que creen que está justificado que un marido golpee a su esposa cuando ella se niega a tener relaciones sexuales (%)",
    "indicatorCode": "SG.VAW.REFU.ZS"
  },
]

const dataToSort = {
  "1989": "",
  "1990": 33.1,
  "1998": 25.1,
  "2007": 18.2,
  "2008": 17.3,
  "2013": 14.2
}

const orderedData = [
  ["1989", ""],
  ["2013", 14.2],
  ["2008", 17.3],
  ["2007", 18.2],
  ["1998", 25.1],
  ["1990", 33.1]
]

const orderedDataDescendent = [
  ["1990", 33.1],
  ["1998", 25.1],
  ["2007", 18.2],
  ["2008", 17.3],
  ["2013", 14.2],
  ["1989", ""],
]

const arr = [2, 4, 6, 3, 9];

const justOneIndicator =   [{"countryCode": "PER", "countryName": "Perú", "data": {"1960": "", "1961": "", "1962": "", "1963": "", "1964": "", "1965": "", "1966": "", "1967": "", "1968": "", "1969": "", "1970": "", "1971": "", "1972": "", "1973": "", "1974": "", "1975": "", "1976": "", "1977": "", "1978": "", "1979": "", "1980": "", "1981": "", "1982": "", "1983": "", "1984": "", "1985": "", "1986": "", "1987": "", "1988": "", "1989": "", "1990": "", "1991": "", "1992": "", "1993": "", "1994": "", "1995": "", "1996": "", "1997": "", "1998": "", "1999": "", "2000": "", "2001": "", "2002": 31.4799995422363, "2003": 29.6299991607666, "2004": 27.6299991607666, "2005": 27.2099990844727, "2006": 26.9699993133545, "2007": 27.6700000762939, "2008": 26.9599990844727, "2009": 27.3600006103516, "2010": 25.3400001525879, "2011": 24.7999992370605, "2012": 25.0400009155273, "2013": 24.0900001525879, "2014": 24.2099990844727, "2015": 21.6800003051758, "2016": 23.7399997711182, "2017": 23.7600002288818}, "indicatorCode": "SL.TLF.PART.FE.ZS", "indicatorName": "Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)"}, {"countryCode": "MEX", "countryName": "México", "data": {"1960": "", "1961": "", "1962": "", "1963": "", "1964": "", "1965": "", "1966": "", "1967": "", "1968": "", "1969": "", "1970": "", "1971": "", "1972": "", "1973": "", "1974": "", "1975": "", "1976": "", "1977": "", "1978": "", "1979": "", "1980": "", "1981": "", "1982": "", "1983": "", "1984": "", "1985": "", "1986": "", "1987": "", "1988": "", "1989": "", "1990": "", "1991": "", "1992": "", "1993": "", "1994": "", "1995": "", "1996": "", "1997": "", "1998": "", "1999": "", "2000": "", "2001": "", "2002": "", "2003": "", "2004": "", "2005": 26.9599990844727, "2006": 27.9799995422363, "2007": 28.6299991607666, "2008": 27.9099998474121, "2009": 28.3999996185303, "2010": 28.5300006866455, "2011": 28.0499992370605, "2012": 28.5, "2013": 27.5799999237061, "2014": 27.6700000762939, "2015": 27.8999996185303, "2016": 27.1700000762939, "2017": 26.6299991607666}, "indicatorCode": "SL.TLF.PART.FE.ZS", "indicatorName": "Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)"}];


describe('worldBank', () => {
  it('Debería ser un objeto', () => {
    expect(typeof window.worldBank).toBe('object');
  })
})
describe('filterCountry', () => {
  it('Debería ser una función', () => {
    expect(typeof window.worldBank.filterCountry).toBe('function');
  })
  it('Debería retornar un objeto que contenga indicadores referentes a Perú para: filterCountry(WORLDBANK, `PER`)', () => {
    expect(window.worldBank.filterCountry(tryData, `PER`)).toEqual(peruvianData);
  })
})
describe('filter', () => {
  it('Debería ser una función', () => {
    expect(typeof window.worldBank.filter).toBe('function');
  })
  it('debería retornar un arreglo de indicadores para: filter(minidata, `prevalencia`)', () => {
    expect(window.worldBank.filter(miniData, 'prevalencia')[1]).toEqual(miniData[1]);
  })
  describe('sort', () => {
    it('debería ser una función', () => {
      expect(typeof window.worldBank.sort).toBe('function');
    })
    it('debería retornar un arreglo de datos ordenados de forma ascendente para sort(dataToSort, `ascendent`)', () => {
      expect(window.worldBank.sort(dataToSort, `ascendent`)).toEqual(orderedData);
    })
    it('Debería retornar un arreglo de datos ordenados de forma descendente para: sort(dataToSort, `descendent`)', () => {
      expect(window.worldBank.sort(dataToSort, `descendent`)).toEqual(orderedDataDescendent);
    });
  })
  describe('meanOfValues', () => {
    it('debería ser una función', () => {
      expect(typeof window.worldBank.meanOfValues).toBe('function');
    })
    it('Debería retornar el promedio: 4.8, para meanOfValues(arr)', () => {
      expect(window.worldBank.meanOfValues(arr)).toEqual(4.8);
    })
  })
  describe('indicatorInAllCountries', () => {
    it('debería ser una función', () => {
      expect(typeof window.worldBank.indicatorInAllCountries).toBe('function');
    })
    it('Debería retornar un arreglo de objetos que tengan el indicador `Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)` para `indicatorInAllCountries(tryData, `Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)`)`', () => {
      expect(window.worldBank.indicatorInAllCountries(tryData, 'Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)')).toEqual(justOneIndicator);
    })
  })
})
